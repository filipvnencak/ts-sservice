{"version":3,"sources":["./src/app/services/api.service.ts","./src/app/tab1/tab1-routing.module.ts","./src/app/tab1/tab1.module.ts","./src/app/tab1/tab1.page.ts","./src/app/tab1/tab1.page.scss","./src/app/tab1/tab1.page.html"],"names":[],"mappings":"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","file":"src_app_tab1_tab1_module_ts.js","sourcesContent":["import { environment } from './../../environments/environment';\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, BehaviorSubject, from } from 'rxjs';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport { Storage } from '@ionic/storage';\nimport { Platform } from '@ionic/angular';\n\nconst JWT_KEY = 'mytoken';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApiService {\n  private user = new BehaviorSubject(null);\n  constructor(private http: HttpClient, private storage: Storage, private plt: Platform) { \n    this.plt.ready().then(() => {\n      this.storage.get(JWT_KEY).then(data => {\n        if (data) {\n          console.log('JWT from storage: ', data);\n          this.user.next(data);\n        }\n      })\n    })\n  }\n  getPosts(page = 1, categoryId = null, search = ''): Observable<any> {\n    let options = {\n      observe: 'response' as 'body',\n      params: {\n        per_page: '5',\n        page: '' + page\n      }\n    };\n\n    let url = `${environment.apiUrl}/posts?_embed`;\n    if (categoryId) {\n      url += `&categories=${categoryId}`;\n    }\n\n    if (search != '') {\n      url += `&search=${search}`;\n    }\n    console.log('request: ', url);\n    \n    return this.http.get<any[]>(url, options).pipe(\n      map(res => {\n        let data = res['body'];\n\n        for (let post of data) {\n          if (post['_embedded']['wp:featuredmedia']) {\n            post.media_url =\n              post['_embedded']['wp:featuredmedia'][0]['media_details'].sizes['medium'].source_url;\n          }\n        }\n\n        return {\n          posts: data,\n          pages: res['headers'].get('x-wp-totalpages'),\n          totalPosts: res['headers'].get('x-wp-total')\n        };\n      })\n    );\n  }\n\n  getPostContent(id) {\n    return this.http.get<any>(`${environment.apiUrl}/posts/${id}?_embed`).pipe(\n      map(post => {\n        if (post['_embedded']['wp:featuredmedia']) {\n          post.media_url =\n            post['_embedded']['wp:featuredmedia'][0]['media_details'].sizes['medium'].source_url;\n        }\n        return post;\n      })\n    );\n  }\n\n\n  getPages() {\n    return this.http.get<any[]>(`${environment.apiUrl}/pages`).pipe(\n      map(res => {\n        const items = [];\n        for (let item of res) {\n          items.push({\n            url: `page/${item.id}`,\n            title: item.title.rendered,\n            icon: 'file-tray'\n          });\n        }\n        return items;\n      })\n    )\n  }\n\n  getPageContent(id) {\n    return this.http.get<any>(`${environment.apiUrl}/pages/${id}?_embed`).pipe(\n      map(page => {\n        if (page['_embedded']['wp:featuredmedia']) {\n          page.media_url =\n          page['_embedded']['wp:featuredmedia'][0]['media_details'].sizes['medium'].source_url;\n        }\n        return page;\n      })\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab1Page } from './tab1.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab1Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab1PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab1Page } from './tab1.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\nimport { Tab1PageRoutingModule } from './tab1-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    Tab1PageRoutingModule\n  ],\n  declarations: [Tab1Page]\n})\nexport class Tab1PageModule {}\n","import { Component } from '@angular/core';\nimport { ApiService } from '../services/api.service';\nimport { LoadingController, PopoverController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-tab1',\n  templateUrl: 'tab1.page.html',\n  styleUrls: ['tab1.page.scss']\n})\nexport class Tab1Page {\n  page = 1;\n  posts = [];\n  totalPages = 0;\n  totalPosts = 0;\n  categoryFilter = null;\n  searchTerm = '';\n\n  constructor(\n    private api: ApiService,\n    private loadingCtrl: LoadingController,\n    private popoverCtrl: PopoverController\n  ) {}\n\n  ngOnInit() {\n    this.loadPosts();\n  }\n  async loadPosts(infiniteScroll = null) {\n    let loading = null;\n    if (!infiniteScroll) {\n      loading = await this.loadingCtrl.create({\n        message: 'Loading Data...'\n      });\n      await loading.present();\n    }\n\n    this.api.getPosts(this.page, this.categoryFilter, this.searchTerm).subscribe(\n      res => {\n        console.log('res: ', res);\n        if (infiniteScroll) {\n          infiniteScroll.target.complete();\n          this.posts = [...this.posts, ...res.posts];\n          if (this.page == this.totalPages) {\n            infiniteScroll.target.disabled = true;\n          }\n        } else {\n          this.posts = res.posts;\n        }\n\n        this.totalPages = res.pages;\n        this.totalPosts = res.totalPosts;\n      },\n      err => {\n        console.log('error: ', err);\n      },\n      () => {\n        if (!infiniteScroll) {\n          loading.dismiss();\n        }\n      }\n    );\n  }\n  loadMore(event) {\n    this.page++;\n    this.loadPosts(event);\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ0YWIxLnBhZ2Uuc2NzcyJ9 */\";","export default \"<ion-header class=\\\"ion-no-border\\\">\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-img src='assets/images/TATRYSUPERSKI_BIAÅE_Rozmiar_TSS.png' ></ion-img>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  \\n  <ion-card *ngFor=\\\"let post of posts\\\">\\n    <ion-card-header>\\n      <ion-card-title [innerHTML]=\\\"post.title.rendered\\\"></ion-card-title>\\n      <ion-card-subtitle>{{ post.date_gmt | date }}</ion-card-subtitle>\\n    </ion-card-header>\\n    <ion-card-content>\\n      <img [src]=\\\"post.media_url\\\" *ngIf=\\\"post.media_url\\\" class=\\\"post-img\\\">\\n      <div [innerHTML]=\\\"post.excerpt.rendered\\\"></div>\\n      <ion-button expand=\\\"full\\\" fill=\\\"clear\\\" [routerLink]=\\\"['/', 'posts', post.id]\\\" text-right>Read More...</ion-button>\\n    </ion-card-content>\\n  </ion-card>\\n  \\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadMore($event)\\\">\\n    <ion-infinite-scroll-content loadingText=\\\"Loading more posts...\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}